open Struct
open Lib.Matrix

let m = [|
    [| 2.; 5.; 8. |];
    [| 4.; 7.; 0. |];
    [| 1.; 9.; 3. |]
|]

let m_inverted = [|[|0.0981308411214953241; 0.266355140186915862; -0.261682242990654179|];
  [|-0.0560747663551401862; -0.00934579439252336379; 0.149532710280373821|];
  [|0.135514018691588772; -0.060747663551401869; -0.0280373831775700931|]|]

let inv = identity 3;;

pivot m inv (0, 0)


let tests = [
    (* Test equal *)
    test (equal m m) true;

    (* Test rotation *)
    test (rotation [|[|1. ; 2. ; 3.|] ; [|4. ; 5. ; 6. |]; [|7. ; 8. ; 9. |]; [|10. ; 11. ; 12. |]|])
        [|[|12.; 11.; 10.|]; [|9.; 8.; 7.|]; [|6.; 5.; 4.|]; [|3.; 2.; 1.|]|];

    (* Test pivot *)
    test m [|
        [| 2.; 5.; 8. |];
        [| 0.; -6.; -32. |];
        [| 0.; 13.; -2. |]
    |];
    test inv [|
        [| 1.; 0.; 0. |];
        [| -4.; 2.; 0. |];
        [| -1.; 0.; 2. |]
    |];

    (* Test find_pivot *)
    test (find_pivot [|[|0.; 5.; 8.|]; [|0.; 7.; 0.|]; [|1.; 9.; 3.|]|] 0) 2;
]